
<!-- Time Picker Interface -->
@if (showTimePicker()) {
  <div class="time-picker-container">
    <h1 class="main-title">Time Until</h1>
    <p class="subtitle">Set your target time</p>
    
    <div class="time-picker">
      <div class="time-input-group">
        <div class="time-input">
          <label for="hours">Hour</label>
          <input 
            id="hours" 
            type="number"
            min="0"
            max="23"
            [ngModel]="formatTime(selectedHour())" 
            (ngModelChange)="onHourChange($event)"
            class="time-input-field"
            placeholder="00"
          />
        </div>
        
        <div class="time-separator">:</div>
        
        <div class="time-input">
          <label for="minutes">Minute</label>
          <input 
            id="minutes" 
            type="number"
            min="0"
            max="59"
            [ngModel]="formatTime(selectedMinute())" 
            (ngModelChange)="onMinuteChange($event)"
            class="time-input-field"
            placeholder="00"
          />
        </div>
      </div>
      
      <button 
        class="start-button" 
        (click)="startCountdown()"
        [disabled]="selectedHour() === null || selectedMinute() === null"
      >
        Start Countdown
      </button>
    </div>
  </div>
}

<!-- Countdown Timer Interface -->
@if (!showTimePicker() && remainingTime()) {
  <div class="countdown-container">
    <div class="countdown-display">
      @if (remainingTime()!.hours > 0) {
        <div class="time-unit">
          <span class="time-value">{{formatTime(remainingTime()!.hours)}}</span>
          <span class="time-label">Hours</span>
        </div>
        <div class="time-separator-large">:</div>
      }
      <div class="time-unit">
        <span class="time-value">{{formatTime(remainingTime()!.minutes)}}</span>
        <span class="time-label">Minutes</span>
      </div>
      <div class="time-separator-large">:</div>
      <div class="time-unit">
        <span class="time-value">{{formatTime(remainingTime()!.seconds)}}</span>
        <span class="time-label">Seconds</span>
      </div>
    </div>
  </div>
}

<!-- Help Modal -->
@if (showHelp()) {
  <div class="help-overlay" (click)="toggleHelp()">
    <div class="help-modal" (click)="$event.stopPropagation()">
      <div class="help-header">
        <h2>URL Usage Guide</h2>
        <button class="help-close" (click)="toggleHelp()">Ã—</button>
      </div>
      <div class="help-content">
        <div class="help-section">
          <h3>Specific Time (Absolute)</h3>
          <div class="help-examples">
            <div class="help-example">
              <code>?time=14:30</code>
              <span>Timer until 2:30 PM today</span>
            </div>
            <div class="help-example">
              <code>?hour=14&minute=30</code>
              <span>Timer until 2:30 PM today</span>
            </div>
            <div class="help-example">
              <code>?hour=15</code>
              <span>Timer until 3:00 PM (or 15 min from now if currently 3:XX PM)</span>
            </div>
          </div>
        </div>
        
        <div class="help-section">
          <h3>Duration Timer (Relative)</h3>
          <div class="help-examples">
            <div class="help-example">
              <code>?duration=15</code>
              <span>Timer for 15 minutes from now</span>
            </div>
            <div class="help-example">
              <code>?duration=5</code>
              <span>Timer for 5 minutes from now</span>
            </div>
            <div class="help-example">
              <code>?duration=120</code>
              <span>Timer for 2 hours from now</span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
}

<!-- Help Button (Bottom Right) -->
<button class="help-button-fixed" (click)="toggleHelp()" title="Show URL usage help">
  ?
</button>

<!-- Toast Notification -->
@if (toastMessage()) {
  <div 
    class="toast" 
    [class.show]="showToast()"
  >
    {{ toastMessage() }}
  </div>
}

<router-outlet />
